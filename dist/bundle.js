(()=>{var e=document.querySelector("canvas");e.getContext("2d"),e.width=1024,e.height=576;for(var a=[],i=0;i<collisions.length;i+=70)a.push(collisions.slice(i,70+i));for(var r=[],n=0;n<battleZonesData.length;n+=70)r.push(battleZonesData.slice(n,70+n));for(var t=[],s=0;s<charactersMapData.length;s+=70)t.push(charactersMapData.slice(s,70+s));var o=[],d=-305,c=-760;a.forEach((function(e,a){e.forEach((function(e,i){1025===e&&o.push(new Boundry({position:{x:i*Boundry.width+d,y:a*Boundry.height+c}}))}))}));var h=[];r.forEach((function(e,a){e.forEach((function(e,i){1025===e&&h.push(new Boundry({position:{x:i*Boundry.width+d,y:a*Boundry.height+c}}))}))}));var u=[],g=new Image;g.src="./img/villager/Idle.png";var l=new Image;l.src="./img/kid/Idle.png",t.forEach((function(e,a){e.forEach((function(e,i){1026===e?u.push(new Character({position:{x:i*Boundry.width+d,y:a*Boundry.height+c},image:g,frames:{max:4,hold:60},scale:3,animate:!1,dialogue:["Back in my time, dreams were shattered, hopes were crushed, and everyone wore a smile to hide the despair within. Good times.","Beware the old well beyond the village outskirts. Legends speak of a mystical creature dwelling within its depths.","Ah, to be young again! Treasure your days, for they pass like the fleeting wind."]})):1031===e&&u.push(new Character({position:{x:i*Boundry.width+d,y:a*Boundry.height+c},image:l,frames:{max:4,hold:260},scale:3,animate:!0,dialogue:["...","Hey mister, have you seen my Mischiefur?.","I think he's hiding in the bushes.","Can you help me find him?"]})),0!==e&&o.push(new Boundry({position:{x:i*Boundry.width+d,y:a*Boundry.height+c}}))}))}));var p=new Image;p.src="./img/Nexusmon map1.png";var y=new Image;y.src="./img/forgroundObjects.png";var m=new Image;m.src="./img/playerDown.png";var w=new Image;w.src="./img/playerUp.png";var f=new Image;f.src="./img/playerLeft.png";var v=new Image;v.src="./img/playerRight.png";var x=new Sprite({position:{x:e.width/2-24,y:e.height/2-34},image:m,frames:{max:4,hold:20},sprites:{up:w,left:f,right:v,down:m}}),k=new Sprite({position:{x:d,y:c},image:p}),B=new Sprite({position:{x:d,y:c},image:y}),I={w:{pressed:!1},a:{pressed:!1},s:{pressed:!1},d:{pressed:!1}};[k].concat(o,[B],h,u),[k].concat(o,h,u,[x,B]),window.addEventListener("keydown",(function(e){if(x.isInteracting){if(" "===e.key){x.interactionAsset.dialogueIndex++;var a=x.interactionAsset,i=a.dialogueIndex;if(i<=a.dialogue.length-1)return void(document.querySelector("#characterDialogueBox").innerHTML=x.interactionAsset.dialogue[i]);x.isInteracting=!1,x.interactionAsset.dialogueIndex=0,document.querySelector("#characterDialogueBox").style.display="none"}}else switch(e.key){case" ":if(!x.interactionAsset)return;var r=x.interactionAsset.dialogue[0];document.querySelector("#characterDialogueBox").innerHTML=r,document.querySelector("#characterDialogueBox").style.display="flex",x.isInteracting=!0;break;case"w":I.w.pressed=!0;break;case"a":I.a.pressed=!0;break;case"s":I.s.pressed=!0;break;case"d":I.d.pressed=!0}})),window.addEventListener("keyup",(function(e){switch(e.key){case"w":I.w.pressed=!1;break;case"a":I.a.pressed=!1;break;case"s":I.s.pressed=!1;break;case"d":I.d.pressed=!1}}));var b=!1;addEventListener("click",(function(){b||(audio.Map.play(),b=!0)}))})();